name: Auto Release ZIP

# Action ini hanya akan berjalan jika Anda mengirim tag berawalan 'v' (contoh: v1.0, v1.5)
on:
  push:
    tags:
      - 'v*'

jobs:
  build-and-release:
    name: Build ZIP and Publish Release
    runs-on: ubuntu-latest
    permissions:
      contents: write # Izin WAJIB agar bot bisa membuat Release di repositori Anda
      
    steps:
      - name: ğŸ“¥ 1. Mengambil Kode (Checkout)
        uses: actions/checkout@v4

      - name: ğŸ“¦ 2. Mengompres Folder menjadi ZIP
        run: |
          echo "Memulai kompresi file..."
          # Mengompres semua file, mengabaikan folder git dan workflow agar bersih
          zip -r WebUI-Release.zip . -x "*.git*" ".github/*"
          echo "Proses kompresi selesai!"

      - name: ğŸ” 3. Cek File ZIP di Log (Debugging)
        run: |
          echo "Memeriksa detail file ZIP yang baru saja dibuat:"
          ls -lh WebUI-Release.zip
          echo "Jika ukuran file muncul di atas, berarti kompresi berhasil."

      - name: ğŸš€ 4. Membuat Release dan Mengunggah ZIP
        uses: softprops/action-gh-release@v2
        with:
          name: Release ${{ github.ref_name }} # Nama rilis otomatis (contoh: Release v1.1)
          files: WebUI-Release.zip
          generate_release_notes: true # Otomatis merangkum riwayat commit sebagai catatan
          draft: false
          prerelease: false

